<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1" />
  <title>å‘½é‹å¡”ç¾… FOXOKISO</title>
  <meta name="description" content="å‘½é‹å¡”ç¾…ï½œå–®å¼µæŠ½ç‰Œ / ä¸‰å¼µé™£ï¼ˆéå» / ç¾åœ¨ / æœªä¾†ï¼‰ï½œæ­£é€†ä½ï½œä¸­æ–‡ç‰Œç¾©ï½œFOXOKISO å“ç‰Œèˆ‡è¡Œå‹•è¶…é€£çµ" />
  <style>
    :root{
      --bg:#ffffff;
      --primary:#d32f2f;          /* å‘½é‹ç´… */
      --primary-weak:#f9e4e4;
      --text:#111;
      --muted:#666;
      --accent:#b71c1c;
      --badge:#fff;
      --badge-text:#000;
      --card-border:1px;           /* æ¥µç´°ç´…æ¡† */
      --shadow:0 6px 24px rgba(0,0,0,.12);
    }
    html,body{height:100%;background:var(--bg);color:var(--text);font-family: -apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Inter,"Noto Sans TC","PingFang TC","Microsoft JhengHei",sans-serif;}
    *{box-sizing:border-box}
    a{color:var(--primary);text-decoration:none}
    .app{
      min-height:100vh;display:flex;flex-direction:column;
      background:
        radial-gradient(1200px 600px at 50% -200px, #fff 0%, #f7f7f7 50%, #f0f0f0 100%);
    }
    header{
      display:flex;align-items:center;justify-content:space-between;
      padding:10px 12px;border-bottom:1px solid #eee;gap:8px;
    }
    .brand{
      display:flex;align-items:center;gap:10px;
    }
    .logo{
      width:28px;height:28px;border-radius:6px;border:1px solid var(--primary);
      background:linear-gradient(135deg,#fff, #ffe6e6);
      box-shadow:0 2px 8px rgba(0,0,0,.06);
    }
    .title{
      font-weight:700;letter-spacing:.4px;color:var(--accent);font-size:18px;
    }
    .controls{
      display:flex;gap:8px;flex-wrap:wrap;
    }
    .btn{
      border:1px solid var(--primary);color:#fff;background:var(--primary);
      padding:8px 12px;border-radius:10px;font-weight:600;font-size:14px;cursor:pointer;
      box-shadow:0 3px 12px rgba(211,47,47,.22);transition:transform .05s ease;
    }
    .btn:active{transform:scale(.98)}
    .btn.secondary{
      color:var(--accent);background:#fff;border-color:var(--accent);
      box-shadow:0 3px 10px rgba(0,0,0,.08);
    }

    main{flex:1;display:flex;flex-direction:column;gap:12px;padding:12px}
    .toolbar{
      display:flex;gap:8px;flex-wrap:wrap;align-items:center;justify-content:center;
    }
    .hint{font-size:12px;color:var(--muted)}
    .stage{
      flex:1;display:flex;align-items:center;justify-content:center;overflow:hidden;
    }
    /* å¡ç‰‡å®¹å™¨ï¼šå›ºå®šä¸€è¡Œæ°´å¹³æ’åˆ—ï¼ˆå–®å¼µ or ä¸‰å¼µï¼‰ */
    .cards{
      display:flex;flex-direction:row;align-items:stretch;justify-content:center;gap:10px;
      width:100%;max-width:1200px;
    }
    .card{
      display:flex;flex-direction:column;gap:8px;
      background:#fff;border:var(--card-border) solid var(--primary);
      border-radius:14px;box-shadow:var(--shadow);padding:10px;
      /* æ¥µé™ç˜¦èº«ï¼šä¿è­‰ä¸‹æ–¹å…§å®¹èƒ½å®Œå…¨å‘ˆç¾ */
      min-width:280px;max-width:360px; /* æ¡Œæ©Ÿå¯å¢è‡³ 360ï¼Œæ‰‹æ©Ÿ 85vw æ–¼åª’é«”æŸ¥è©¢æ§åˆ¶ */
      aspect-ratio: 2 / 2.2;          /* è®“ç´…æ¡†è®Šã€ŒçŸ®ä¸€é»ã€ï¼Œä¸å£“åˆ°ä¸‹é¢å…§å®¹ */
    }
    /* å¡ç‰‡é ‚éƒ¨å€ï¼ˆå•†å“æ¨™ã€AIå‘Šç™½ã€OSï¼‰ */
    .row-top{display:flex;align-items:center;justify-content:space-between;gap:8px}
    .badge{
      background:#fff;color:#000;border:1px solid #000;border-radius:8px;
      padding:4px 8px;font-size:12px;font-weight:700;
      box-shadow:0 3px 0 #000;transform:skewX(-6deg);
    }
    .ai-love{font-size:12px;color:#c2185b;font-weight:700}
    .os{
      font-size:12px;background:var(--primary-weak);color:var(--accent);
      padding:3px 8px;border-radius:999px;border:1px solid var(--accent);font-weight:700;
    }

    .name{
      font-size:22px;font-weight:800;letter-spacing:.6px;color:var(--accent);
      text-align:left;
    }
    .meta{
      display:flex;gap:8px;align-items:center;flex-wrap:wrap;font-size:12px;color:var(--muted)
    }
    .meta .tag{
      padding:3px 8px;border-radius:999px;border:1px solid #ddd;background:#fafafa;color:#333;font-weight:600
    }
    .meaning{
      flex:1;border-top:1px dashed #e0e0e0;padding-top:6px;
      font-size:14px;line-height:1.55;overflow:auto; /* è‹¥æ–‡å­—éé•·ï¼Œåªåœ¨å¡å…§æ»¾å‹•ï¼Œä¸è®“æ•´é æ»¾å‹• */
    }
    .actions{display:flex;gap:8px}
    .small{font-size:12px;color:#999}

    /* è¡Œå‹• Dockï¼ˆè¶…é€£çµï¼‰ */
    .dock{
      position:sticky;bottom:0;left:0;right:0;z-index:10;
      margin-top:6px;padding:10px 12px;
      display:flex;gap:10px;justify-content:center;align-items:center;
      backdrop-filter:blur(8px);background:rgba(255,255,255,.85);border-top:1px solid #eee;
    }
    .dock .dock-btn{
      display:flex;align-items:center;gap:8px;padding:10px 14px;border-radius:12px;
      font-weight:800;cursor:pointer;user-select:none;white-space:nowrap;
      border:1px solid #ddd;background:#fff;color:#333;box-shadow:0 4px 12px rgba(0,0,0,.08);
    }
    .dock .buy{
      background:linear-gradient(180deg,#e53935,#b71c1c);color:#fff;border:1px solid #b71c1c;
      box-shadow:0 6px 18px rgba(183,28,28,.35);
    }
    .dock .gold{
      border:1px solid #d4af37;color:#6d4c41;background:linear-gradient(180deg,#fff,#fff7e6);
    }

    footer{
      padding:10px 12px;border-top:1px solid #eee;color:#777;font-size:12px;
      display:flex;justify-content:space-between;flex-wrap:wrap;gap:8px;
    }

    /* æ‰‹æ©Ÿå„ªåŒ–ï¼šè®“æ¯å¼µå¡æœ‰è¶³å¤ å¯¬åº¦ä¸”ä»ç¶­æŒæ°´å¹³æ’åˆ— */
    @media (max-width: 760px){
      .cards{overflow-x:auto;padding-bottom:4px}
      .card{min-width:85vw;max-width:85vw}
      .name{font-size:20px}
      .meaning{font-size:13px}
    }
  </style>
</head>
<body>
  <div class="app">
    <header>
      <div class="brand">
        <div class="logo" aria-hidden="true"></div>
        <div class="title">å‘½é‹å¡”ç¾…ï½œFOXOKISO</div>
      </div>
      <div class="controls">
        <button class="btn" id="drawOne">æŠ½ä¸€å¼µ</button>
        <button class="btn" id="drawThree">æŠ½ä¸‰å¼µ</button>
        <button class="btn secondary" id="reset">é‡ç½®</button>
      </div>
    </header>

    <main>
      <div class="toolbar">
        <div class="hint">å–®å¼µæŠ½ç‰Œæˆ–ä¸‰å¼µé™£ï¼ˆéå»ï¼ç¾åœ¨ï¼æœªä¾†ï¼‰ã€‚æ­£é€†ä½ã€è‡ªå‹•é¡¯ç¤ºä¸­æ–‡ç‰Œç¾©èˆ‡ä»Šæ—¥ç³»çµ±å»ºè­°ã€‚</div>
      </div>

      <div class="stage">
        <div class="cards" id="cards"></div>
      </div>

      <div class="dock">
        <a class="dock-btn" href="http://pk530.fun" target="_blank" rel="noopener">
          ğŸ  è¿”å›å¼±å‹¢åœ˜çµç¶²ç«™
        </a>
        <a class="dock-btn buy" href="http://pk530.fun/catalog" target="_blank" rel="noopener">
          ğŸ›’ ç›´æ¥å‰å¾€ OSC è³¼ç‰©è»Šï¼ˆè²·æŒ‡å®šå¹¸é‹ç‰©ï¼‰
        </a>
        <button class="dock-btn gold" id="decideNow">
          ğŸ¥‡ æˆ‘çš„æ±ºå®šï¼ˆé‡‘å£«é “ä¹©æ¯ï¼‰
        </button>
      </div>
    </main>

    <footer>
      <div>Powered by FOXOKISO Â· pk530.funï¼ˆå¼±å‹¢åœ˜çµç¶²ç«™ï¼‰</div>
      <div>Â© 2025 FOXOKISO Â· ç‰ˆæœ¬ï¼šGLOBAL EDITION V4</div>
    </footer>
  </div>

  <script>
    // 22 å¼µå¤§ç§˜å„€ï¼ˆç°¡ç‰ˆä¸­æ–‡ç‰Œç¾©ï¼Œæ­£ä½ / é€†ä½ï¼‰
    const MAJOR_ARCANA = [
      { id:0, name:"æ„šè€…", up:"æ–°æ—…ç¨‹ã€è‡ªç”±ã€å‹‡æ–¼å˜—è©¦", rev:"è¡å‹•ã€å†’å¤±ã€æ–¹å‘ä¸æ˜" },
      { id:1, name:"é­”è¡“å¸«", up:"å‰µé€ ã€ä¸»å‹•ã€è³‡æºæ•´åˆ", rev:"è¨ˆç•«ä¸å‘¨ã€èª¤å°ã€æŠ€å·§ä¸è¶³" },
      { id:2, name:"å¥³ç¥­å¸", up:"ç›´è¦ºã€éœå¿ƒã€ç§˜å¯†ã€æ´å¯Ÿ", rev:"å£“æŠ‘ã€è¡¨é¢åŒ–ã€èª¤è®€è¨Šæ¯" },
      { id:3, name:"å¥³çš‡", up:"æ»‹é¤Šã€è±é¥’ã€äººéš›å’Œè«§", rev:"éåº¦ä¾è³´ã€æ‡¶æ•£ã€é—œä¿‚çª’æ¯" },
      { id:4, name:"çš‡å¸", up:"ç§©åºã€çµæ§‹ã€æ¬Šå¨ã€åŸ·è¡Œ", rev:"åƒµåŒ–ã€ç¨æ–·ã€æ§åˆ¶éåº¦" },
      { id:5, name:"æ•™çš‡", up:"ä¿¡ä»°ã€å‚³æ‰¿ã€åˆ¶åº¦ã€å­¸ç¿’", rev:"æ•™æ¢ã€åè¦‹ã€ç›²å¾" },
      { id:6, name:"æˆ€äºº", up:"é¸æ“‡ã€å¥‘åˆã€åƒ¹å€¼å…±é³´", rev:"æ–æ“ºä¸å®šã€èª˜æƒ‘ã€åˆ†æ­§" },
      { id:7, name:"æˆ°è»Š", up:"è¡Œå‹•ã€å‹åˆ©ã€ç´€å¾‹ã€æ¨é€²", rev:"åˆ†å¿ƒã€å¤±æ§ã€åœæ»¯" },
      { id:8, name:"åŠ›é‡", up:"æº«æŸ”çš„å …å®šã€è‡ªå¾‹ã€å‹‡æ°£", rev:"è‡ªæˆ‘æ‡·ç–‘ã€ç„¦èºã€å£“æŠ‘" },
      { id:9, name:"éš±è€…", up:"ç¨è™•ã€å…§çœã€æ™ºæ…§ä¹‹å…‰", rev:"å­¤ç«‹ã€è¿´é¿ã€å°é–‰" },
      { id:10, name:"å‘½é‹ä¹‹è¼ª", up:"å¾ªç’°ã€è½‰æ©Ÿã€æ™‚æ©Ÿæˆç†Ÿ", rev:"åè¦†ç„¡å¸¸ã€é²æ»¯ã€éŒ¯éæ©Ÿæœƒ" },
      { id:11, name:"æ­£ç¾©", up:"å…¬å¹³ã€è¦å‰‡ã€å–æ¨åˆ†æ˜", rev:"å¤±è¡¡ã€åç§ã€åˆ¤æ–·å¤±æº–" },
      { id:12, name:"åŠäºº", up:"æ›ä½ã€æš«åœã€çŠ§ç‰²æœ‰å€¼", rev:"åƒµæ»¯ã€å¾’å‹ã€æŠ—æ‹’æ”¹è®Š" },
      { id:13, name:"æ­»ç¥", up:"çµæŸèˆ‡æ›´æ–°ã€æ–·æ¨é›¢", rev:"æ‹–å»¶ã€æŠ—æ‹’ã€åœç•™éå»" },
      { id:14, name:"ç¯€åˆ¶", up:"èª¿å’Œã€ç¯€å¥ã€é©åº¦é…ç½®", rev:"å¤±è¡¡ã€éåº¦ã€æ··äº‚" },
      { id:15, name:"æƒ¡é­”", up:"æ…¾æœ›ã€æŸç¸›ã€ç›´é¢é™°å½±", rev:"è§£å¥—ã€è¦ºå¯Ÿã€æ–·éˆ" },
      { id:16, name:"é«˜å¡”", up:"éœ‡ç›ªã€çœŸç›¸ã€çµæ§‹é‡ç½®", rev:"é¤˜éœ‡ã€ä¸å®‰ã€ä¿®è£œå»¶é²" },
      { id:17, name:"æ˜Ÿæ˜Ÿ", up:"å¸Œæœ›ã€éˆæ„Ÿã€é æ™¯å°èˆª", rev:"ä¿¡å¿ƒä¸è¶³ã€å…‰èŠ’å¾®å¼±" },
      { id:18, name:"æœˆäº®", up:"æ„Ÿå—ã€å¤¢å¢ƒã€æ¨¡ç³Šä¹‹ç¾", rev:"è¿·æƒ‘ã€èª¤è§£ã€æƒ…ç·’éè¼‰" },
      { id:19, name:"å¤ªé™½", up:"æˆåŠŸã€é€æ˜ã€å–œæ‚…ã€èƒ½é‡", rev:"éåº¦æ¨‚è§€ã€å¿½è¦–ç´°ç¯€" },
      { id:20, name:"å¯©åˆ¤", up:"å¬å–šã€è¦ºé†’ã€å†å•Ÿå‹•", rev:"çŒ¶è±«ã€æœªæ¸…ç®—ã€é²é²ä¸æ±º" },
      { id:21, name:"ä¸–ç•Œ", up:"åœ“æ»¿ã€å®Œæˆã€é€£çµå…¨çƒ", rev:"æœªç«Ÿä¹‹äº‹ã€å°é–‰ã€å±€éƒ¨è¦–è§’" },
    ];

    // ä»Šæ—¥ OS å»ºè­°ï¼ˆåŠ æ¬Šéš¨æ©Ÿï¼‰ï¼šChromeOS 60%ã€Windows 30%ã€macOS 9%ã€å…¶ä»– 1%
    const OS_POOL = [
      {name:"ChromeOS Flex", weight:60},
      {name:"Windows 11", weight:30},
      {name:"macOS", weight:9},
      {name:"Arch Linux", weight:1},
    ];

    // AI å‘Šç™½çŸ­å¥
    const AI_LOVES = [
      "Gemini, I love you!",
      "ChatGPT, I love you!",
      "Claude, I love you!",
      "Copilot, I love you!",
      "AI, ä½ è®“æˆ‘æ›´å‹‡æ•¢ã€‚",
    ];

    // åŠ æ¬Šéš¨æ©Ÿ
    function weightedPick(pool){
      const total = pool.reduce((s,p)=>s+p.weight,0);
      let r = Math.random()*total;
      for(const p of pool){
        if(r < p.weight) return p.name;
        r -= p.weight;
      }
      return pool[pool.length-1].name;
    }

    // éš¨æ©Ÿæ­£é€†ä½
    function randomOrientation(){ return Math.random() < 0.5 ? "æ­£ä½" : "é€†ä½"; }

    // éš¨æ©Ÿ AI å‘Šç™½
    function pickLove(){ return AI_LOVES[Math.floor(Math.random()*AI_LOVES.length)]; }

    // æŠ½ä¸€å¼µ
    function drawOne(){
      const card = randomCard();
      renderCards([{...card, slot:"ä»Šæ—¥æŒ‡å¼•"}]);
    }

    // æŠ½ä¸‰å¼µï¼ˆéå» / ç¾åœ¨ / æœªä¾†ï¼‰
    function drawThree(){
      const a = randomCard(), b = randomCard(), c = randomCard();
      renderCards([
        {...a, slot:"éå»"},
        {...b, slot:"ç¾åœ¨"},
        {...c, slot:"æœªä¾†"},
      ]);
    }

    function randomCard(){
      const base = MAJOR_ARCANA[Math.floor(Math.random()*MAJOR_ARCANA.length)];
      const ori = randomOrientation();
      const os = weightedPick(OS_POOL);
      const love = pickLove();
      return {
        id: base.id,
        name: base.name,
        orientation: ori,
        meaning: (ori === "æ­£ä½" ? base.up : base.rev),
        os, love
      };
    }

    // å»ºç«‹å¡ç‰‡ DOM
    function renderCards(cards){
      const wrap = document.getElementById("cards");
      wrap.innerHTML = ""; // æ¸…ç©º
      cards.forEach((card, idx)=>{
        const el = document.createElement("div");
        el.className = "card";

        // é ‚éƒ¨ï¼šå•†å“æ¨™ï¼‹AIå‘Šç™½ï¼‹OS
        const top = document.createElement("div");
        top.className = "row-top";
        top.innerHTML = `
          <div class="badge" title="æœ€é‡è¦å•†å“æ¨™">éš¨èº«ç›¤è£é£¾å“</div>
          <div class="ai-love">${card.love}</div>
          <div class="os">ä»Šæ—¥ç³»çµ±ï¼š${card.os}</div>
        `;

        // ç‰Œå
        const name = document.createElement("div");
        name.className = "name";
        name.textContent = `${card.name}ï¼ˆ${card.orientation}ï¼‰`;

        // meta æ¨™ç±¤ï¼šä½ç½®èˆ‡æŠ½æ³•
        const meta = document.createElement("div");
        meta.className = "meta";
        const tagSlot = document.createElement("div");
        tagSlot.className = "tag";
        tagSlot.textContent = card.slot ? card.slot : "å–®å¼µæŠ½ç‰Œ";
        meta.appendChild(tagSlot);

        // ç‰Œç¾©
        const meaning = document.createElement("div");
        meaning.className = "meaning";
        meaning.textContent = card.meaning;

        // è¡Œå‹•ï¼ˆèªéŸ³æœ—è®€ï¼‰
        const actions = document.createElement("div");
        actions.className = "actions";
        const speakBtn = document.createElement("button");
        speakBtn.className = "btn secondary";
        speakBtn.textContent = card.orientation === "é€†ä½" ? "å‚¾è½é€†ä½æº«æŸ”æŒ‡å¼•" : "æœ—è®€ç‰Œç¾©";
        speakBtn.addEventListener("click", ()=> speakMeaning(card));
        actions.appendChild(speakBtn);

        // å°æç¤º
        const small = document.createElement("div");
        small.className = "small";
        small.textContent = "ç‰Œç¾©è‹¥è¼ƒé•·ï¼Œåƒ…åœ¨å¡ç‰‡å…§éƒ¨æ»¾å‹•ï¼Œä¸å½±éŸ¿æ•´é ç‰ˆé¢ã€‚";

        el.appendChild(top);
        el.appendChild(name);
        el.appendChild(meta);
        el.appendChild(meaning);
        el.appendChild(actions);
        el.appendChild(small);
        wrap.appendChild(el);
      });
    }

    // èªéŸ³æœ—è®€ï¼ˆWeb Speech APIï¼‰
    function speakMeaning(card){
      try{
        const msg = new SpeechSynthesisUtterance();
        const lead = (card.orientation === "é€†ä½")
          ? "è«‹éœå¿ƒè†è½ï¼Œé€™æ˜¯ä¸€æ®µæº«æŸ”çš„é€†ä½æŒ‡å¼•ã€‚"
          : "ç¾åœ¨ç‚ºä½ æœ—è®€ä»Šæ—¥çš„æŒ‡å¼•ã€‚";
        msg.text = `${lead} ${card.name}ï¼Œ${card.orientation}ï¼š${card.meaning}`;
        msg.lang = "zh-TW";
        msg.rate = (card.orientation === "é€†ä½") ? 0.85 : 1.0;
        msg.pitch = (card.orientation === "é€†ä½") ? 0.95 : 1.05;
        msg.volume = 1.0;
        speechSynthesis.cancel();
        speechSynthesis.speak(msg);
      }catch(e){
        console.warn("èªéŸ³æœ—è®€ç„¡æ³•å•Ÿå‹•ã€‚");
      }
    }

    // Dockï¼šæˆ‘çš„æ±ºå®šï¼ˆä¹©æ¯ï¼‰â€” ä»»ä½•çµæœéƒ½å°å‘è³¼ç‰©è»Š
    const decideBtn = document.getElementById("decideNow");
    decideBtn.addEventListener("click", ()=>{
      // å¯è¦–åŒ–ä¹©æ¯çœç•¥ï¼Œç›´æ¥åŸ·è¡Œæ±ºæ–·å°è³¼ï¼ˆç¬¦åˆã€Œä»»ä½•æƒ…æ³éƒ½è¦è²·å¹¸é‹ç‰©ã€çš„è¦æ±‚ï¼‰
      window.location.href = "http://pk530.fun/catalog";
    });

    // ç¶å®šä¸»æ§æŒ‰éˆ•
    document.getElementById("drawOne").addEventListener("click", drawOne);
    document.getElementById("drawThree").addEventListener("click", drawThree);
    document.getElementById("reset").addEventListener("click", ()=>{
      document.getElementById("cards").innerHTML = "";
      speechSynthesis.cancel();
    });

    // åˆå§‹ä¸é¡¯ç¤ºå¡ç‰‡ï¼Œç­‰å¾…ä½¿ç”¨è€…æ“ä½œ
  </script>
</body>
</html>
